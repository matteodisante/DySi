# Complete Rocket Simulation Configuration Example
# This file demonstrates all available configuration options

rocket:
  name: "Calisto"
  dry_mass_kg: 15.426

  inertia:
    ixx_kg_m2: 6.321
    iyy_kg_m2: 6.321
    izz_kg_m2: 0.034

  geometry:
    caliber_m: 0.127  # 127 mm diameter
    length_m: 2.031   # 2.031 m total length

  cg_location_m: 1.255  # Center of gravity from nose (without motor)
  cp_location_m: 1.700  # Center of pressure from nose (will be computed if omitted)

  coordinate_system: "tail_to_nose"  # or "nose_to_tail"

  nose_cone:
    length_m: 0.550
    kind: "vonKarman"  # Options: vonKarman, conical, ogive, elliptical
    position_m: 1.481  # Position from coordinate system origin

  fins:
    count: 4
    root_chord_m: 0.120
    tip_chord_m: 0.060
    span_m: 0.100
    thickness_m: 0.003
    position_m: -1.168  # Position from coordinate system origin
    cant_angle_deg: 0.0  # Cant angle for spin stabilization
    airfoil: null  # Path to airfoil file (optional)

  parachute:
    enabled: true
    name: "Main"
    cd_s: 10.0  # Drag coefficient × area (m²)
    trigger: "apogee"  # "apogee" or altitude in meters (e.g., 800)
    sampling_rate_hz: 105.0
    lag_s: 1.5  # Deployment lag time
    noise_std: [0, 8.3, 0.5]  # [x, y, z] noise standard deviations

  # Optional: Custom drag curves (if not provided, uses default Cd calculation)
  # power_off_drag: "data/calisto_power_off_drag.csv"
  # power_on_drag: "data/calisto_power_on_drag.csv"

motor:
  type: "SolidMotor"
  thrust_source: "data/motors/Cesaroni_5880M1160-P.eng"  # Path to thrust curve file

  dry_mass_kg: 1.815
  dry_inertia: [0.125, 0.125, 0.002]  # [Ixx, Iyy, Izz] in kg·m²

  nozzle_radius_m: 0.033
  throat_radius_m: 0.011

  grain_number: 5
  grain_density_kg_m3: 1815.0
  grain_outer_radius_m: 0.033
  grain_initial_inner_radius_m: 0.015
  grain_initial_height_m: 0.120
  grain_separation_m: 0.005

  grains_center_of_mass_position_m: -0.850
  center_of_dry_mass_position_m: 0.317
  nozzle_position_m: 0.0

  burn_time_s: null  # Computed from thrust curve if null

  position_m: -1.373  # Motor position on rocket

environment:
  latitude_deg: 39.3897
  longitude_deg: -8.2889
  elevation_m: 100.0

  atmospheric_model: "standard_atmosphere"  # Options: standard_atmosphere, custom_atmosphere
  # atmospheric_model_file: "data/atmosphere.nc"  # Required if using custom model

  date: null  # [year, month, day, hour_utc] or null for no specific date
  # date: [2023, 6, 15, 12]

  wind:
    model: "constant"  # Options: constant, function, custom
    velocity_ms: 5.0
    direction_deg: 90.0  # Meteorological convention (0=North, 90=East)

  gravity_ms2: 9.80665
  max_expected_height_m: 5000.0

simulation:
  max_time_s: 600.0
  max_time_step_s: .inf  # Use inf for automatic
  min_time_step_s: 0.0
  rtol: 0.000001  # Relative tolerance
  atol: 0.000001  # Absolute tolerance
  terminate_on_apogee: false
  verbose: false

  rail:
    length_m: 5.2
    inclination_deg: 85.0  # Degrees from vertical (0=horizontal, 90=vertical)
    heading_deg: 0.0  # Degrees from North (0=North, 90=East)
